<?xml version="1.0"?> 
<project name="Docs" basedir="../.."> 

 	<target name="docs.clean" description="Cleans out the documentation directory.">
 		<echo>Cleaning out docs from '${dir.docs}'...</echo>
 		<mkdir dir="${dir.docs}"/>
 		<delete includeemptydirs="true">
 			<fileset dir="${dir.docs}" includes="**/*"></fileset>
 		</delete>
 	</target>
	
	<!-- Requires a "docClasses" param like this: 
		<param name="docClasses" value="org.puremvc.as3.utilities.routes.RouteMachine org.puremvc.as3.utilities.routes.SWFAddressMediator" />
	-->
	<target name="docs.generate" description="Generates the source documentation using the asdoc executable." depends="docs.clean">
		<fail unless="docClasses">No documentation classes set to generate documentation from.</fail>
		<exec executable="${exec.asdoc}">
			<arg line="-doc-classes ${docClasses}" />
			<arg line="-external-library-path='${dir.libs}'" />
			<arg line="-source-path='${dir.classes}'" />
			<arg line="-output='${dir.docs}'" />
			<arg line="-main-title '${ant.project.name} API'" />
			<arg line="-window-title '${ant.project.name} API'" />
		</exec>
	</target>
			
	<target name="docs.deploy" description="Generates the docs and archives it as a zip for easy deployment." depends="docs.generate">
		<tstamp/>
		<zip destfile="${basedir}/tmp-docs.zip">
			<fileset dir="${dir.docs}" />
		</zip>
		<move file="${basedir}/tmp-docs.zip" tofile="${basedir}/docs-${DSTAMP}.zip" />
		<!-- TODO SFTP and unarchive it directly on the server, maybe only if we have a build.deploy.properties file? -->
	</target>

</project>